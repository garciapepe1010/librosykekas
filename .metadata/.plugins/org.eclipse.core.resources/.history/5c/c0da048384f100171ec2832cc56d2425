package com.adnaloy.librosykekas.basics;

import javax.ejb.LocalBean;
import javax.ejb.Stateless;
import javax.ejb.TransactionAttribute;
import javax.ejb.TransactionAttributeType;
import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;
import javax.persistence.PersistenceContextType;

import com.adnaloy.librosykekas.basics.interfaces.categoriaLocal;

@Stateless(mappedName = "categoria")
@LocalBean
public class Categoria implements  categoriaLocal{
	
	@PersistenceContext(unitName="librosykekasJPA", type = PersistenceContextType.TRANSACTION)	
	private EntityManager manager;
	
	/**
     * Default constructor. 
     */
	
	public Categoria() {
        // TODO Auto-generated constructor stub
    }
	
	private String clave;
	private String nombre;


	public void setManager(EntityManager manager) {
		this.manager = manager;
	}
	public String getClave() {
		return clave;
	}
	public void setClave(String clave) {
		this.clave = clave;
	}
	public String getNombre() {
		return nombre;
	}
	public void setNombre(String nombre) {
		this.nombre = nombre;
	}
	
	
	public void reset() {
		
		this.setClave(null);
		this.setNombre(null);
	}
	
	@TransactionAttribute(TransactionAttributeType.REQUIRED)
	public void anado() {
		
		com.adnaloy.librosykekas.librosykekasJPA.Categoria categoria = new com.adnaloy.librosykekas.librosykekasJPA.Categoria();

		categoria.setNombre(nombre);
		
	    //tx.begin();
	    manager.persist(categoria);
	    //tx.commit();
	}
	
	@TransactionAttribute(TransactionAttributeType.REQUIRED)
	public void actualizo() {
		
		com.adnaloy.librosykekas.librosykekasJPA.Categoria uno = manager.find(com.adnaloy.librosykekas.librosykekasJPA.Categoria.class, clave);
		uno.setNombre(nombre);
		
	    //tx.begin();
	    manager.persist(uno);
	    //tx.commit();
	}
	
	@TransactionAttribute(TransactionAttributeType.REQUIRED)
	public void elimino() {
	
		com.adnaloy.librosykekas.librosykekasJPA.Categoria uno = manager.find(com.adnaloy.librosykekas.librosykekasJPA.Categoria.class, clave);
		
	    //tx.begin();
	    manager.remove(uno);
	    //tx.commit();
	}
	
	@TransactionAttribute(TransactionAttributeType.NEVER)
	public Categoria buscaEditorialFab() {
		com.adnaloy.librosykekas.librosykekasJPA.Categoria uno = manager.find(com.adnaloy.librosykekas.librosykekasJPA.Categoria.class, clave);

		this.setNombre(uno.getNombre());
		
		return this;
	}

}
